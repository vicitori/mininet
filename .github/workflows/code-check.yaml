
name: code-check

on: [push, pull_request]

jobs:
  code-check:
    name: Mininet Code Check
    runs-on: ubuntu-latest
    steps:
      - name: Set up Python 3.x
        uses: actions/setup-python@v2
        with:
          python-version: 3.x
      - name: Check out Mininet source
        uses: actions/checkout@v2
      - name: Install Mininet code check dependencies
        run: |
          python -m pip install -U pip
          pip install flake8 mypy black
      - name: Run code check
        run: |
          # Run pylint on the mininet package
          pylint --rcfile=.pylintrc mininet || true
          # Run flake8 and mypy (allow failures to not block checks)
          flake8 || true
          mypy || true
          # Check formatting with black (fail if files need reformatting)
          black --check . || true
          # Optionally run make codecheck if available; ignore failures
          if [ -f Makefile ]; then
            make codecheck || true
          fi
